---
title: Novela ‚ù§Ô∏è Gatsby.js
author: Mario Ba≈°iƒá
date: 2019-08-27
hero: ./images/hero.jpg
excerpt: Novela makes it easy to start publishing beautiful articles and stories with Gatsby.js.
---

I stumbled upon Novela by a total accident on Twitter. I had just created my account on [Twitter](https://twitter.com/BasicMario) (again) and started following [@gatsbyjs](https://twitter.com/gatsbyjs) when a tweet appeared showing Novela. Something about a contest with themes and stuff I knew nothing about at the time.

<blockquote class="twitter-tweet" data-theme="light"><p lang="en" dir="ltr">Just in time for the <a href="https://twitter.com/gatsbyjs?ref_src=twsrc%5Etfw">@gatsbyjs</a> Theme Jam, we've released Novela ‚Äî the simplest way to publish beautiful stories with Gatsby.<br /><br />üëÅ See it: <a href="https://t.co/tKI2vJcNyS">https://t.co/tKI2vJcNyS</a><br /><br />üîó Git it: <a href="https://t.co/bO4cKW4b0p">https://t.co/bO4cKW4b0p</a> <a href="https://t.co/pt6CkIUFST">pic.twitter.com/pt6CkIUFST</a></p>&mdash; Narative (@narative) <a href="https://twitter.com/narative/status/1156988245789564928?ref_src=twsrc%5Etfw">August 1, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

The design of Novela was beautiful and it worked really fast. The fact that it was a Gaysby.js theme got me very interested, because the only thing that I knew about [Gatsby.js](https://www.gatsbyjs.org/) (in future reference just Gatsby) was that it was a static site generator and that it uses React.js which I like very much.

I first heard about Gatsby from listening to a podcast called [syntax.fm](https://syntax.fm/) which is hosted by [@wesbos](https://twitter.com/wesbos) and [@stolinski](https://twitter.com/stolinski). I find this to be the most entertaining podcast about web development.

## Novela - a Gatsby theme

[Novela](https://novela.narative.co/) is a Gatsby theme built by the team at [Narative](https://www.narative.co/), and built for everyone that loves the web‚Ñ¢Ô∏è. It includes multiple homepage layouts, built-in social sharing and a dark mode.

You can view the source code on GitHub [narative/gatsby-theme-novela](https://github.com/narative/gatsby-theme-novela).

### My contributions

You can view the source code for my blog on [GitHub](https://github.com/laravelista/laravelista.github.io).

I've made a few changes to the theme and have sent PRs for them on GitHub. You can find the links here:

- [Fixes article seo structured data #128](https://github.com/narative/gatsby-theme-novela/pull/128)
- [Fix for secret articles in next section and RSS feed #114](https://github.com/narative/gatsby-theme-novela/pull/114)
- [[Feature] Adds RSS feed #106](https://github.com/narative/gatsby-theme-novela/pull/106)
- [More articles no longer displays secret articles #103](https://github.com/narative/gatsby-theme-novela/pull/103)
- [Bugfix/horizontal scroll #100](https://github.com/narative/gatsby-theme-novela/pull/100)
- [Fixes subscription panel fade when having only one post. #95](https://github.com/narative/gatsby-theme-novela/pull/95)
- [Adds patreon and paypal icons. #92](https://github.com/narative/gatsby-theme-novela/pull/92)

I've also discovered why component shadowing was not working for some files, but for others it was working.

<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/chrisbiscardi?ref_src=twsrc%5Etfw">@chrisbiscardi</a> looks like <a href="https://twitter.com/BasicMario?ref_src=twsrc%5Etfw">@BasicMario</a> resolved a component shadowing issues. Filenames with a . in them could not be shadowed. <br /><br />Check out this PR:<a href="https://t.co/yVntsZlYVs">https://t.co/yVntsZlYVs</a></p>&mdash; Dennis Brotzky (@_brotzky) <a href="https://twitter.com/_brotzky/status/1166367456501223424?ref_src=twsrc%5Etfw">August 27, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

There is also a discussion on Twitter about this PR and how [@chrisbiscardi](https://twitter.com/chrisbiscardi) figured out why this was happening ([More details](https://twitter.com/chrisbiscardi/status/1166382573884338182)).

### Creating a logo which supports light and dark mode

For the logo I have used [Inkscape](https://inkscape.org/).

When exporting the logo I used "Save as" (Optimized SVG) with these options:

| Options                                     | Value |
|---------------------------------------------|-------|
| Number of significat digits for coordinates | 5     |
| Shorten color values                        | ‚úÖ    |
| Convert CSS attributes to XML attributes    | ‚úÖ    |
| Collapse groups                             | ‚úÖ    |
| Create groups for similar attributes        | ‚úÖ    |
| Keep editor data                            | ‚ùå    |
| Keep unreferenced definitions               | ‚ùå    |
| Work around renderer bugs                   | ‚úÖ    |


| SVG Output                                                | Value |
|-----------------------------------------------------------|-------|
| Remove the XML declaration                                | ‚úÖ    |
| Remove metadata                                           | ‚úÖ    |
| Remove comments                                           | ‚úÖ    |
| Embed raster images                                       | ‚úÖ    |
| Enable viewboxing                                         | ‚úÖ    |
| Format output with line-breaks and indentation            | ‚úÖ    |
| Indentation characters                                    | Space |
| Depth of indentation                                      | 1     |
| Strip the "xml:space" attribute from the root SVG element | ‚úÖ    |

| IDs               | Value |
|-------------------|-------|
| Remove unused IDs | ‚úÖ    |
| Shorten IDs       | ‚ùå    |

I need a desktop and a mobile logo, so I repeated the steps above for both. To replace the theme logo with my own I had to use component shadowing.

I created the following directory structure and file:

```
src
  @narative
    gatsby-theme-novela
      components
        Logo
          Logo.tsx
```

Inside the `Logo.tsx` file I pasted the contents from the [theme `Logo.tsx` file](https://github.com/narative/gatsby-theme-novela/blob/master/%40narative/gatsby-theme-novela/src/components/Logo/Logo.tsx).

Then I opened the newly created .svg files in a text editor and copied them inside `Logo.tsx` file in place of the theme desktop and mobile logos.

I modified my desktop SVG logo to match this:

```javascript
width="192"
height="23"
viewBox="0 0 192 23"
fill="none"
xmlns="http://www.w3.org/2000/svg"
className="Logo__Desktop"
```

I modified my mobile SVG logo to match this:

```javascript
width="18"
height="23"
viewBox="0 0 18 23"
fill="none"
xmlns="http://www.w3.org/2000/svg"
className="Logo__Mobile"
```

I had to adjust the viewBox to match my logo and since the logo seemed small I also adjusted the height attribute and replaced all `stroke-width` with `strokeWidth`, and `clip-path` with `clipPath`. Finally, I removed all other unnecessary attributes.

The next part required me to experiment a bit. I needed to place `fill={fill}` on appropriate tags in my SVG files depending on which part I wanted to have its color changed by toggling the light and dark mode on the theme.

### Mailchimp and GDPR regulations

Since my business is located in the EU I have to comply with GDPR regulations. Because of that I require each newsletter subscriber to opt-in (give persmission) to be contacted about new content on this website via Email. I've managed to solve this by providing a message saying that if they enter their email and click on subscribe that they give their permission to be contacted via Email about new content on this website.

Behind the scenes this is how I made it to work with Mailchimp.

I have created a file at `/src/@narative/gatsby-theme-novela/components/Subscription/Subscription.tsx` and copied the content from the [theme repository](https://github.com/narative/gatsby-theme-novela/blob/master/%40narative/gatsby-theme-novela/src/components/Subscription/Subscription.tsx). Then inside I have changed the following code:

```javascript
addToMailchimp(email)
```

with:

```javascript
addToMailchimp(email, {
  'gdpr[27301]': 'Y',
  'gdpr[27305]': 'Y',
  'gdpr[27309]': 'Y',
}, null)
```

Fields `'gdpr[27301]`, `gdpr[27305]` and `gdpr[27309]` are field names which I have located on my embed form from Mailchimp on the GDPR fields. By setting their value to `Y` I am subscribing the user and checking that he has given his permission.

To obtain my mailchimp list id (audience id) I followed the instructions on the [plugin repository](https://github.com/benjaminhoffman/gatsby-plugin-mailchimp).

---

**Thank you for reading this post.**

Feel free to support me on [Patreon](https://www.patreon.com/laravelista) or donate on [Paypal](https://www.paypal.me/laravelista).